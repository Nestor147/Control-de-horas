import { SystemVersion } from '../../models/core/websocket/system-version';

// tslint:disable:typedef
export class UpdateWindow {
  private mainWrapper: HTMLDivElement;
  private version: SystemVersion;
  private worldSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="-14 -3 265.5 300"><path class="panel-world" d="M98-3v.199c1 .3 1 .301 1 .401-1-.1-1-.1-1-.2v.2c1 .1 1 .101 1 .201V-2s0 .1 1 .1v.1l1 .1v.2-.1h-1v-.1l-1-.1h-1c0 .1 1 .1 1 .2v.1l1 .1v.3l-1-.1-1-.1v-.3h-1v.1h1v.2h-1v.3-.1h-1v.3h1v.5h-1v.6h-1v.5h1v.1l1 .3v1l-1 .1v.1h-1v.4l-1 .1v.5h-1v.9c1 0 1 0 1 .3h1v.2c0 .1 0 .2 1 .2v-.1h1v-.1.8L96 6l-1 .1V6h-1v.8c0 .2 1 .3 1 .5v.4l1 .1v.5l1 .1V8c1 0 1 0 1 .1v-.2h1v.2V8h1v-.1.1h1v.2l1 .1c1 0 1 .1 1 .2v.1h1V9l1 .3v.7l1 .2v.4l1 .3v.6l1 .1v.5l1 .5v.7c0 .2 0 .2 1 .7v1.3h1v2.3c0 .3 0 .3 1 .4h1s1 0 1-.1v-.3c1-.8 1 1.2 2 1.2 1 .4 2 .7 2 1v.3h-1c-1 .1-2-.9-3-.3 0 .4 0 .7 1 1v.2h-1v1.1c1 .6 2 .4 3 .9v-.7h1v-1h-1l-1-.2v-.4c1 .3 1 .3 2 .4h1v.5l1 .1-1 .2 1 .2-1 .3s0 .1 1 .2v.7c1 .3 1 .6 1 .8h-1v.5h-1v-.1l-1 .1c1 .5 1 1 1 1.4l-1-.1v1.4c1 .7 2 .6 2 1.8v.4s1 2.5 2 1.9v-.3h1v.9c1 2.5 1 2.5 2 2.5v-1h1v2c-1 1.3 8 8.6 9 8.5 0 0 1 0 1-.1v-.2h1c2 .4 5 4.2 6 1.4v-.3c0-.1 0-.2-1-.6 0-1 1-2.2 0-3.2-1-.8-2-1.4-2-2.4v-.3c0-.1 0-.2 1-.2V38s0-.1 1-.2c-1-.9-1-.9 0-1.4v-.2c0-.6-1-1.1-1-1.7 0-1.2-1-1.3-2-2.1 1-.1 1-.1 1-.5v-1.1c1 0 1 0 2-.1-1-.7-1-.7-1-1.2h1c0 .8 0 .8 1 1.3 0-.1 0-.1 1 0v-1.4c1 0 1-.1 1-.4v-1.9c0-.3 0-.3-1-.8l1-.2-1-.3v-.3l1-.2c-1-.3 0-.3-1-1v.1h1v.1c2 .6 2 .6 3 .4v-1.4c0-.1 0-.2 1-.3v-.4c0-.6-1-1-1-1.7 1 0 1 0 2-.2-1-.7-1-.8-1-1v.7h-1c0-.1-1-.6-1-.7-1 0-2-.2-3-.8v-1.4c1 .3 2 1.2 3 1.6v-.7c0-.1 0-.2 1-.3 0 0-4-2.3-7-3.5v-.3l1 .5h1c0-.3-1-.6-1-.9-1-.1-1-.1-1-.3-1-.7-1-1-2-.7v.2c0-.1 0-.3-1-.5 0-.1 0-.1-1-.4v-.2h1l1 .6v-.4h1s0 .1 0 0c0-.4-1-.9-2-1.3v.2c-1-.2-1-.3-1-.6 0 .1 0 .1 1-.1l-1-.3 1 .1v-.2c-1-.6-3-1-4-1.8v-.1c0-.2 0-.4-1-.6-1-.6-3-.8-4-1.5l-1-.2v-.3h1c1 .2 1 .2 1 .3v.1l2 1.2v-.1l-3-1.5v-.3l-1-.1V5l-1 .1-1-.6v.1-.1s-1-.6-2-.4c0 .1 0 .2 1 .3-1-.2-2-.6-2-.7 0-.1 0-.1-3-1.1h1l-2-.6v-.1c-1-.6-2-1.3-4-1.8V0h-1c0-.1-1-.2-1-.3l1 .1v-.1l-2-.5v-.1c-1-.1-1-.2-2-.3 0-.1-1-.1-1-.2h-1c1 .2 1 .2 2 .6l-1-.1 1 .3c1 .2 1 .5 2 .7-1-.2-2-.6-3-.9 0-.1 0-.1-1-.3 0-.3-2-.5-2-.6v.2c-1 0-1 0-1 .1v.2c-1-.3-1-.4-1-.6V-2s1 0 1-.1c0 0-1-.101-1-.201V-2.4s-1-.1-1-.2l-2-.201v-.1h-1l1 .1h-1c0-.2-1-.199-1-.199h-1zm-7 .5v.5-.199V-2h-1v.1l-1 .3h1v.5-.3h-1v-.5h-1v.5-.1c-1 .4-1 .4-1 .5l-1 .2-.4.2h.1l-.5.3.2.1c-.1.2-.1.2-.1.4.3 0 .5.2.7.3l1-.4v-.2.3l-1 .4v.27L85.8.8l-.4.4v.3l.1.4.3.6.2.3 1 .1c0 .2-1 .2-1 .4v.8l-.4-.7-.5-.1h-.7l-.5.1-.6.3c-.2.1-.3.3-.4.4l-.2.3.4.1h.7l.6-.1-.8.4-.1.5c.6.1.7.1 1.9-.6l-.5.6-.8.5h-.7c-.2-.1-.7-.2-.8-.5 0 0-.1-.3-.3-.4h-.9c-.4 1.2-.4 1.2-1.3 1.3l-.6.5v.7l.5.4c.3-.1.7-.3 1-.4.5 0 .8.4 1.2.4.4 0 .5-.4.8-.4.2.2.2.2 1.3.1h.6c0 .1 0 .1-.3.5v.1c.2 0 .6.1.9 0h.5c1-.6 1-.6 2-1.1v-.5l-1 .3v-.6l1-.1V4.9h1c1 .1 1 .1 1 0v-1c0-.1 1-.2 0-.6 0 0 0-.3-1-.3v.3l-1 .2V3c1-.1 1-.1 1-.2s0-.1 1-.4v.3c1 .1 1 .1 1-.4v-.5h1v.3l1-.2-1-.5v-.2h1V.9l1-.2c0-.3 0-.5 1-1v-.5s0 .2-1 .3v-.4h1v-.9.1L94-2v-.199.099L93-2v-.4s0-.1-1-.1v.301-.301h-1zm-6.5 5.8c-.1-.2 0-.3.4-.5.1-.2.3-.4.4-.6-.6-.3-.6-.3-.6-.4l.1-.4.2-.2V1c-.3.2-.4.2-.4.2-.2-.2.2-.3.3-.5 0-.2-.3-.1-.3-.3 0 0 0-.1.1-.3.3-.5.3-.5.3-.6h-.1c-.5.1-.6.2-.7.2h.3c-.4.3-.6.3-.7.3h-.4c-.4.1-.4.1-.4.3 0 0 0 .1-.4.3H82l-.5.4-.5.2c-.2.1-.4.3-.6.4h.3c-.2.1-.4.3-.6.5v.3h.5l.6-.1h.6l-.2.4c-.5.1-.6.2-.6.2h-.5l-.6.2.1.4-.3.5.7.3.8-.1.5.2.5-.3h.3c.1 0 .2 0 .4-.4l.4-.4.3.2c.1-.1.2-.2.4-.3h.2c.1 0 .2.1.3.1zM106-1.44c1 .13 1 .27 2 .34h-1l1 .1c-1-.1-1-.2-2-.4v-.04zM99-.8v.26-.26zm-9 .4v.8h-1l1-.4v-.4zm-2 1zm-1 .24V1l1 .1v.7c-1-.53-1-.73-1-.82V.84zM79.4 1c-.2.1-.5.3-.6.4h.4l-.6.4.6-.2.6-.5-.1-.1h-.3zm-3.8 1.2l-1.2.2-.5.4h.4V3l-.6.5h-.5l-.5.5h.4l-.2.3.6-.2h.2l.6-.1-.3.7.4.2.6-.3.5-.5.1-.3.5-.5v-.6h-.4l.2-.3.1-.2h-.4zm-5.4.8l-.7.1-1.3.5h1.1c.4 0 .6.1.9.1.6-.3.6-.4.6-.4V3h-.6zm7.5 0l-.6.3-.3.4-.7.7.4.1.6-.1h.7l.5-.3v-.5l-.6-.1V3zm-11.3.7l-.7.4-.2.5h.4l.9-.6v-.3h-.4zm1.7.4l-.7.1-1 .3-1 .8.1.1.6-.1h.9l.7-.3.3-.4.3-.1.8-.4h-1zm2.5.5c-.5.4-.9.7-1.3 1.4l.7-.2.6-.8v-.4zm2 0l-.6.5.4.1.7-.2.1-.4h-.6zm-8.7.2l-1.1.4h-.6l-.3-.1c-1.3.5-2.6 1.1-3.9 1.5h-.6l-1.1.3-.8.6v.4l1.1-.5-.3.4.7-.3.7-.4h.5l1.1-.6 1-.3-.8.6.6-.2 1-.2 1.8-.8 1.2-.6-.2-.2zm13.2.2l-.8.4-.4.4h.9l.6-.1.6-.3.4-.4h-1.3zm2.9.1l-.9.1-.8.6.9.3c.3 0 .6-.2.8-.3.1-.5 0-.6 0-.7zm-16.9.8l-.6.4.6.1.7-.4h-.7v-.1zm2.6.4l-.7.3-.6.1-.4.6c-.1.5-.1.5-1.3 1.1l.4.1c-.4.4-.5.4-1 .4h-.7l.1-.4.7-.8-.1-.3h-.5V7l-.2-.1-1.1.2-1.3.6-1.1.5-1.3.5-.9.6.7.1.4.2h.8l.9-.2.7.2h.6c-.3.1-.6.3-1.2.3h-.7l-.9.2-.6.5.1.3h1l1.6-.4 1.4-.6.8-.1h1.9l1.1-.4 1.5-1.1.2-.4h-.4l-.6.5-.2-.3.2-.7c.2-.1.5-.3.6-.5l.6-.6h-.5zm10 0l-.8.1-.7.6.2.5.3.5h.7v-.1l.9-.5.3-.4v-.5h-.7l-.2-.2zm-6.7.2l-1.1.8c-.1.1-.3.3-.3.5 0 .6-.1.8-.1.9l.5.4.7-.2.5-.1-.2.4-.6.9.7-.2h.7l.6-.1.6-.6c.3-.3.5-.6.8-.8.2-.1.5-.2.7-.4.2-.1.3-.5.3-.5s0-.4-.2-.4c-.1 0-.3.1-.7.3l-.1-.6h-.6c-.1.5-.4 1.9-1 1.4l.2-.9h-.6l-.6.6-.6.6-.1-.6.8-1-.3-.4zm8.4.5c-.2 0-.5.1-.7.1-.6.9-.6 1-.7 1.9l-1 .8v.6l.5.7 1.3-.1c.3-.1.6-.3.9-.4.6.9.6.9 1.8.8h1.6l.8-.2.5-.4.3.4c2.4-.1 2.4-.1 2.5-.6 0 .1 0-.1.5-.3l.1-.8-1-.4-1.1-.3-1.1.3-1.5.3-.9.1-1.1-.3h-1l-.3-.8.4-.7.2-.7h-1zm-19.3.6l-1 .2-1.3.6.4.2 1.9-1zm7.8 1.5l-.2.1c-.2.2-.4.2-.5.2l-.5.6h.6c.1-.1.5-.3.7-.5.3-.2 0-.4-.1-.4zm8 0l-.6.1-1.2.4-.6.5v.7h.6l.4.3.9-.2.7-.8-.3-.4.1-.6zm-23.5 1.2l-1.5.1c-.3.2-.6.4-.9.5l-1.4 1-2.5 1.5-4.1 2 .6.7-1.3 1.7 1.9-.8h.9l1.3-.6c1.1-.7 1.9-1.2 5-2.5l2.5-.8 1.4-.4.9-.7.1-.9-.5-.1-1.3.4-.2-.4-.1-.5-.8-.2zm19.3.5l-.7.5h.6l.1-.5zm2.9 1.2c-1.4 0-1.4 0-1.5.3-.5.7-.6.8-1.3 1.1-.4.5-.7 1-1 1.5-.6 1.4-.6 1.4-.7 1.6l1.1-.1 1-.6.6-.8.9.3.9-.5 1-1.2c.3-.3.8-.6 1.1-.8-.3-.4-.5-.4-.6-.5h-.9l-.6-.3zm-5.3.1l-.6.6h-.3l-.4-.3-1 .2-.4.6v.8c-1.7 1.5-1.7 1.3-1.8.4h-.6l-.6.6.3.6.2.5c.2.1.5.2.6.3-.1.5-.2.8-.3.9l-.1.2c0 .2.7.6.7.6.2 0 1-.6 1.3-.7l1.4-.1 1.2-1 .1-.8-.1-.7-.3-.5c1.8-.6 1.8-.6 1.5-1.7v-.5h-.8zm-8.3.3l-.7.4.5.2.8-.6H59zm1.6 0c-.3.1-.6.3-.9.5 0 .5.1.6.1.6s.1.1-.2.9l1.1-.4 1-.9v-.4l-1.1-.3zM52 13l-1.3.6-.9.3-1 .2-1.3.5-.9.8-1.5.6-.6.5h.5l-.1.5 1-.3 1-.1-.1.6-1.3.3-1.1.2-1 .5.4.6h2.4c.3 0 .7 0 1.1.1.1.2.3.4.4.6-.1.1-.2.2-.8.6l-1.7-.2c-.6 0-1.1 0-1.6-.1l-1.9.6-.7 1.4 1.2.1h1.1l-.6 1.3.2.6c.5 0 1 0 1.5.1h1.5l1.5-.6 1.3-.3 1.6-.6.9-.4v.5l.7-.1.9 1.1 1.1.1 1.1-.1 1.1-.9-.3-.8h.7l1.3-.2.6-.6-.4-.7-1.3-.8v-1.2l1.1-1.1-.1-.7 1.2-1.4.3-.9-.5-.6h-.9c-.4.3-.7.6-1.1 1l-.6.7-.6 1-.5.5-.3-.1v-.5l.6-.7.4-.6.3-1-.6-.1-.6.6-.2.6h-.8l-.6.5-.8.1.7-.6.9-.6-.5-.1-.3-.3h-.7l-.8.6-.4-.1.6-.4.9-.8-.1-.3H52zm26.9.1l-1.5.1-1.9 1.2-1.7 1.7-1.2 2.2 1.2.3.9.1v.9l-1-.2-1.3.3.5 1.1h1.3l.8-.3.7.7 1.5.6-1.2.3-.4 1 .6.7-1.9 1.9-1.1 1.4-1.3 1.1-.4-.2-.1-1.7 1-1-1-1.6-1.8 1.2-.8-2.2-.5-.3.6-1.1.4-1.2-.7-.1.5-1-.6-1.1-1.3-.1-.6.6H66l-1.3 1-.2.9-.6.6.5 1.2.7.8-.9 1.1-1.2-.3-.3 1.3h1.2l1.7-.8c-.2.4-.4.9-.6 1.3l-2.9 1.3-.8 1.9-.9-1.1 1.1-1.3h-.9l.6-1.3h.8l.7-1.8-1.3-1.1-1.2 1.3-1.4.5 1 1.4-1.3.8-.9 1h-3.5l-1.2-.9-1.1-.3-.8-1.2-1.7.7-2.4.8-.5 1.3-1.7 1.9.7-2.4-.9-1-2.1.3-3.4-.6.6-.6 1.8-.5-.6-1.3h-1.2L38 21.8l.3-.9-1-.3h-.8l-1.2.7-.9.1 1.3-1.7-2.3 1.4-.6-.1 1.7-2-.4-.4-1.9 1.2-1.6.7-1.1.1-1.9.5-2.2.8 2.6-1.3 1.4-.3 1.2-.3 1.2-.6-.2-.2-1.9.5-2.4.7H26l-2.9 1.1-.8-.3.9-1.4-1.2-.4.5-.7-.3-.4-1.4.2.5-.7c-.3 0-.5-.1-.7-.1l.1-.6c-.2 0-.4-.1-.6-.1l-.4-.1C9 22.9-.9 30.3-9.8 38.7l1.3-.3-.2.8-2.1.8-1.4 1.2c-.2.2-.5.4-.6.6l-1.001 1.2 2.901-1.4 1.4-.2c.5-.7 1.3-1.6 2-2.1l.8.2-.5 1.4-.1 1.2.5.6 1.3-.3.2.7c.2 0 .5 0 .7.1l-.4 1.3.3 1.2c0 .6 0 1.3.1 1.9l.9-.3.1.9-.4 1.4.8.7-1.2 1.2.6 1-1.1 1.1.5.6.7.3-.9 1.4-.3 1.5-.9 1.7-.6 1.6 1.1.3-.8 1.9.2 1.9-.1 1.5.8 1.2 1 .8.9.6-.3 1.1.8 1.5.6 1.3-.6 2.6-.9 2.1L-4 76l-.2-1.8.3-1.1-.7-1.2-.6-.5.7-1.7c-.3 0-.6 0-.9-.1l-.4-.9-.5-.5-.7-.3-1 .1v1.4l.5.9.4 1.3 1.1 2.1-.3 2.1-.4 2.7-1 2.1-1.3 2.8c-.4 1.1-.8 2.2-1.3 3.3l-1 .7c-.3.7-.6 1.4-.8 2.2l.1 2.4-1.1 2.2-.3 1.8.201 2-.701 2 .4 2 .9 1v4l.8 1-.1 2 .6 2h1.7l.9 1 1.7 2 1 1v2l.3 3 .3 3 1 2 1.3 2 .2 1-1.3 1 .6 1 1.4 2 1.8 2 1 1-.3 2 .3 1 1.5 1 1.4 1 1 2v1h.9l.3-2-.5-2-1.3-1-.1-1-1.5-2-.5-2-.4-2-1.2-2-.2-2h-1.3l-.5-3-1.2-2 .2-3h1.2l1.6 1 .8 2-.2 2 1.5 3 1.7 3 1.6 2 1.1 2 .1 2 1.9 1 1.3 2 1 2 2.2 3 .8 3 1.2 1-1.3 1-.4 1 2.5 3 2.1 2 2.6 1 2.8 2 3.3 1 3.7 3h4.9l.6-1H38l2.5 2 2.7 2 1.5 2h4.4l1.4 2 2.8 1 .1-1 1.5 1c4.5 6 4.5 6 4.2 8h2l1.5 1c3.1 3 3.1 3 4.5 3l3.8 1 2.1 1-.2-2 1-1h3.6l.4 2 1.2-1 .6-1-1.3-2h-9.9l-1.7-1-2.3-3 .1-2v-2l.7-3v-3l-1.2-1-2.3-2-3.4 1-2.3-1-2.6 1-1.8-1 1.6-2v-2l.6-1 .9-3v-2l1.5-1 .3-2-1.1-1h-6.2l-1 2-1.1 3-1.2 2-2 1h-2.8l-2.9 1-1.3-2-2.4-2-.8-2-1.6-3-.8-4-.2-4 1.3-2 .8-3-1-3 2.3-3h1.8l1.9-2 1.9-1h2.5l1.8 1 1.5-1 1.1 2h3.9l-.3-2 .7-2h4.6l3.4 1 1.3 1h1.9l1-1 1.6 2 1.4 2s0 1-.1 2l.8 1 .3 2 1.1 1 .6 1 1.4 1 .1 2H72l.8-1 .6-2-.7-2-.7-3-1.6-3c0-2 .1-3 .3-5 .2 0 .6-1 .8-2l1.5-2 2.1-1 2.5-2 2.4-2 2.3-1 .4-1 1.8-1-1.4-3-1.1-1 .5-2-.5-1 1.7-1 1.4 2 .9-2 1-1 1-2 1-3h3l2-1.3 3-.2-1-1.4v-2.9l2-2.2h2v-1.3l3 .1 2-1.3 1-1.7c4-.1 4-.1 6 .5l-1 .7h-3c0 .4-1 .9-2 1.3 0 .6 1 1.3 1 1.8l1 .6 1-1.2 1-.7 2-.6 2-1 2-.5 2-1.9 1-1.3v-1.6l-2 .6-1 2.5-2 .1-3-1-2-1.7-1-2.9 2-1.4-1-2.3-3-.2-3 .9-3 1.9-3 3.2-3 1.8 1-1.7 2-1.8 1-.9-3-.6h4v-1.5l2-1.4 2-.1 1-1.7 2-.6h2l5-.1 3 .4 2-.1 2-1.4 1-1.9 3-.4 2-1.4v-.8l-1-.8 1-.8V64l-3-.3v-1h-3l-2 1.1-1 .8-1-.4v-1.3l3-.7 2-.6 1-1-2-.1-2-.8-2-.6-1-1.2-2-1.2-1-1.1 1-.2 1-.8-2-1.8-2-2-3-3.4-1-1.5-1 2v1.8l-2 .6-1 1.3-1-.1-1-1.2-1-.8-2 .5 1-1.9c0-.9-1-1.7-1-2.5v-1.3l-2-.3-1-1-2-1.4-2-1.5-1 .8-2-.1-1-.5h-2.1l-1 1 .7 1.4-.5 1.9.1 1.3.6 1.8h-1.3v1.7l-.9.9 1.1.7 1.6 1.3.3 2.2c0 .8-.1 1.7-.1 2.5l-1.4 1.8-1.9 1.2-2.5.3 1.2 2.2c-.1.9-.1 1.9-.2 2.9l.6 1.7-.5 1.3-1.3 1.7-2.5.3-1.3-2.5-1.5-2.1c0-.6.1-1.2.2-1.8l-.2-2.5.6-2-3-.4-2.2-.1-1.1-.7-2.6-.7-.9-1.2-2.1-1.3-2.1-1.4-3.3.7-.4-1.3-.4-2.9-1.3-.8-.6-1.2 1.5-3.4 2.3-2.5 2.1-2.1 2-.7 1.7-1.1-.1-1.2-1.9-.6-2-.9 2.6.5 2 .6 1.1-.2.6-1.3 1.6.7 1.2-.2.4-1 .8-.4.7-1.3-1.3-.2-1.4.1-.4-.7-1.5-.8 1.2.1 1.8.6 1.2.5 1.5-.5 1.3-1.2-.7-1h1.3l.6.9-1 .9-1.1 1.8c-.2.7-.4 1.5-.6 2.2l-1.5.5.1 1 1.5.1c-.1.3-.1.6 0 1 .6 0 1.3 0 1.9-.2l.8-1.2 1.9.1 1 .2 1 .5h1.5l.4-1.3-1.5-.4-.4-1.5-1.8-.2-1.1-1.3-1.2-.3c.1-.3.1-.6.2-.9l1.2.3.7-.6v-.7h1.4l.7-1 1.5-1 .6-.8-.5-.9-.3-1.5 1.2-.2.6-1.1-.6-1.1-1.1-.6-1.3-.9h1.7l.3-.6 1.2.1.8.6h1.3l1.3-.3-.8-1 .7-.2.9 1.2 1.4.1v1.1l1 .2 1 .8 1 .4v1.1l1 .5 1 1.1v1.3L91 30l-1 1.5v1.4l-2 .3-1-.3h-1.5l-1.8 1.2c0 .4-.1.9-.1 1.3l2 .4 1.4-.1 1-.7v-.4l1 .2 2 .6 2 1.9 1 1 1 1.3h1l2 1.7 3 .1 2 .8v-1.1l-3-2.1-1-1-1-1 2 .9 3 1.6 2 .9v-1.5l1-1.3-2-.8-1-2.1-2-.7-2-2.5v-.7l1-.6 3 2.4 2 1.5 1 .2v-1.8l2-.6v-.7h1v-2h-2v-.6l-2-1-1-.1-1-.6h-1l-1-.8v-.7h-2l-1-.1V24h2v-.6l-2-.4 1-.5v-.1l-1-.8-1-.5v-.7l-1-.5h-1v-.6h-1l-1-.1 1-.6-1-.4-2 .4-1-1V17h-1v-.7l-1-.5h-2v.6l-.8.1-.8-.2-.4.5h-.9l.1-.9.7-.8-.5-1.1-.1-.9h-1.4l-.9.8h-1l-.9.5-.6 1 .3 1.1-.7.7.5 1.3-.8.1-.6-1.2.3-1.5.3-1 1.1-1 1.3-.8h-1.3zm5.4.2v1.1l.1.8 2.6.1v-.6l2-.3-1-1-2.4-.1h-1.3zm82.7 6.5s6 4.6 11 7.8 12 13.4 16 18.1c4 4.7 5 3.7 7 3.1 2-.6 2 .4 4 4.7s6 6.9 7 9.2c1 2.2 1 4.9 2 6.3 0 1.3-1 7-1 9s5 4.9 5 6.4c1 1.5 3 6.6 2 8-2 1.3-4-.6-6-.6-2-.1 1 4.1 2 6.2 1 2 3 11 5 11 1 0 4 2 5 0s2-6 1-7c0-1 0-5.2-1-6.6v-3.6c-1-.7 1-1.1 1-1.1l1-3.2s4 5.1 6 6.8c2 1.6 9 13.7 10 15.7l-2-5s-15-54.7-75-85.2zm77 90.2zM51.2 23.4l-1.9.4-2.3.8.9.3 1.4-.6h1.1l.8-.9zM88 26l-2 .1s-.4.4-1 1.2l.6 1 1.4.1 1-.3 1-1.1-1-1zM76.9 39.3c-.2.1-.4.3-.6.5-.1 0-.1 0-.6.1-.2 0-.4.1-1.3.6l-.6.3c.2.2.3.4.6.5h.7c.5-.1 1.1-.6 1.2-.6.2-.1.2-.1.6-.6v-.8zm3.6 1L79 41l.3 1.8H81l.7-.3c0-.2 0-.5.1-.7v-1.3l-1.3-.2zM126 70s0 .2-1 .5c0 .3 1 .5 1 .7v1.4s-1 1.8-3 3.6c0 .5-1 .8-1 1.3v2.3c3 0 5 0 7-.1 0 0 1 .1 1 .8 2 1.3 2 1.4 3 1.8V82c1-.1 1-.3 0-2.3v-2.2l1-.2c-1-.3-1-.6-1-.9-1 0-1 0-1-.2 0 0-2-.7-2-1.2 0-.3-1-.4-1-.5 0-.2-1 0-2-.2 0-.1 0-.3-1-.4 1-1.4 1-1.4 1-1.7v-.3c1-.1 1-.9 0-1.5V70h-1zm-16 3.3v.4c0 .1 0 .2 1 .4v1c1 .2 1 .4 1 .6l1 .6v.3c1 0 1 .1 2-1.5 0-.1-1-.4-1-.5h-1c-1-.3-1-.6-1-.8 0-.4-1-.5-1-.5s0 .1-1 0zM237 104l-3 3c-1-2-1-2-2-2 0 1-1 2 0 3h-2v3h-3c-1 1-2 0-2 0l-1-1c0 2 0 3 1 5h-2c0 1 1 3 1 4-1 0-1 0-2 1 0 2 0 4 1 6v2h-2c1 2 0 3-1 5-4 2 0 7-3 10h-1v1l-2 7v2h3v12c0 1-1 1-1 2v4c0 2 0 3 2 5h1c0 1 0 2 1 3 0 4 0 4 3 6v3c1 1 2 3 4 3 0-1 1-1 1-2h2c0-1 1-1 2 0v1c2-1 3-4 5-4h1c0-1 0-1 1-2 0 1 1 1 1 1-1 3 0 3 0 4 1 0 2 0 2-1v4c-7 24-7 24-8 26v1c-3 6-5 9-17 28-1 1-2 3-3 4-5 6-6 7-9 10l8-8c5-6 5-6 14-19 5-7 5-7 12-21 3-7 3-7 8-23 4-14 4-27 5-37 0-8 0-8-3-24l-2-12c-1-1-1-2-2-3 0 2 1 4 1 6l-1-1h-1l-7-15zM68.9 145h-6.8c-2.3 2 1.3 5 4 4 .6-1 1.1-1 1.8-2h1.9s2.2 1 2.5 2c.1 1 .1 1 .5 1 0 0 2 1 2.5 1 .7-1 .9 0 1.3 0 .1 0 1 2 2.7 2H87c0-1-2.4-3-3.8-3H82c-1.2 0-2.3 0-3.4-1-.7 0-1.1-1-1.7-1-.9-1-2.1-1-3.1-2-1.2 0-1.2 0-1.4-1h-3.5zM92 155h-2v3c1 0 2 2 2 2h2c1 0 2-1 3-1h4c2 0 3-1 4-1h1l2 1h2c0-1 0-1 1-1 0 0-1 0-1-1-1 0 0-1 0-1h-7l-1 1h-2c-1 0-1-1-2-1 0-1-1-1-2-1h-4zm-15 2c.2 0 .4 1 .6 1h.3c.2 1 .3 0 .8 0s1.4 1 1.4 1h.2c0 1 0 1 .1 1h1.1c.3 0 .3 0 .9-1h.1c-.1 0 .1-1-.3-1h-.9c-.3-1-.6-1-.9-1H77zm17 16c-1 0-1 0-1 2h-4c0 1-2 2-4.9 2 0 1 0 2-.2 3-.8 1-.8 1-2 1-.8 1-.9 1-.9 2-2 1-2.5 3-2.5 3 .3 0 .8 0 1.2 1 0 2 2.3 4-.2 6-.4 3-.4 3-1 3-.4 0-1 0-1.4 1 .1 0 .2 1 .3 1-.5 0-1.1 1-1.5 1l-.1 1c-1.4 0-2.2 1-2.2 3h-2c.2 1-.2 3 .2 4h2.6c0 1 0 1-.2 2h-2c0 2 0 2-1.4 2-.2 2-.2 2 .8 3 .2 5 6.5 5 6.9 9 0 1 0 1 .1 2 7.4 11 7.4 11 8.4 11 0 0 4 1 8 5h1v14c0 1-1 2-2 3-1 4-1 4-1 5v1c1 5 1 6-1 7v2c-1 1-2 2-2 3 1 2 0 2 0 4v2h-1v2h2v-2h1v1h-1v1c0 1 0 1-1 3v-2s0 1-1 1l1 1v1l-1-1s0 1-1 1v1h2v1c-1 0-1 0-2 1h1v2h1l-1 1h1l1 1h-1c1 1 2 1 2 2h5c0-1 0-1-1-1v-3s-1 0 0-1h1l3-3h-1c-1-1-1-1-1-2 1 0 1 0 2-1h1l1-1c0-1 0-1 1-2h2c0-1 0-1-1-1h-1v-2h1c0 1 1 1 1 1 1 0 1 0 2-1l1-1v-2h6s2-2 4-2v-3c0-1 0-1-1-1 0-1-1-1-1-1h2c5 1 5 1 7-1l6-5s0 1-1 1c1 0 8-5 8-8 0-1 0-2 6-6h2l2-1c2 0 4 0 5-1 0 0 1 0 1-1 1 0 1 0 6-6l2-3c0-1 0-1 1-1 1-1 1-2 1-3l1-1v-2c0-1 1-2 1-3 0 0 5-3 6-4l4-5v-3c1-5 0-5-1-6h-2c-2 0-3-4-6-3h-3c-2-1-3-2-4 0 0 0-1 1-2 0 0-1 0-1 1-1-3-3-3-3-5-3h-1c-1-1-1-1-3-1v3h-2c0-1 0-1 1-2l1-1v-1s-1 0-3-1h-1v1c-1 1-1 2-3 1l1-1c3-3 3-3 2-5h-1v-3c-1-2-1-2-1-3 0 0-5-2-7-3h-5c-4 0-5-2-6-4l-3-2c-2 0-2-1-1-3h-2l-2 1c-1-1 0-1 0-2h1c-1-1-1-1-3-1h-3c-1 2-1 2-2 3-1-1-2-2-3-2s-2 0-4-1h-1s0-1-1-1c-1-1-2-2-4-2 0 1 0 1-1 2-1 0-2 1-2 1-1 2 1 3 0 5-3-2 0-4-1-6 0-1 2-3 2-3h-2z"/></svg>';
  private progressSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 37" id="circle-progress" width="450" height="450"><path class="progress-bg" d="M18 2.084a15.915 15.915 0 0 1 0 31.831 15.915 15.915 0 0 1 0-31.83"/><path class="progress-indicator" d="M18 2.084a15.915 15.915 0 0 1 0 31.831 15.915 15.915 0 0 1 0-31.83"/><path class="cloud-with-arrow" d="M26 15.8l-1-.3.1.1c.1 0 0-1.3 0-1.4-.1-2.3-1.8-4.1-4.2-4.1-1.5 0-2.9.8-3.7 2.1l-.4.9-1-.2h-.5c-1.2 0-2.2.7-2.6 1.9l-.4 1-1-.1h-.2c-1.59 0-2.79 1.2-2.79 2.8 0 1.6 1.3 2.8 2.79 2.8H17v-2.8c0-.3.1-.5.3-.8.3-.1.5-.2.8-.2.5 0 1.1.4 1.1 1v2.8h5.9c1.6 0 2.7-1.2 2.7-2.8 0-1.2-.7-2.2-1.8-2.7zm-5.8 6.9l-1.7 1.7v-5.9c0-.3-.2-.4-.4-.4-.3 0-.4.1-.4.4v5.9L16 22.7c-.1-.1-.4-.1-.5 0-.2.1-.2.4 0 .6l2.3 2.3c0 .1.2.1.3.1.1 0 .2 0 .3-.1l2.3-2.3c.1-.2.1-.5 0-.6-.2-.1-.4-.1-.5 0z"/><svg xmlns="http://www.w3.org/2000/svg" id="action-label" width="90%" height="100%"><text x="50%" y="28.5">Downloading</text></svg></svg>';
  private title: string;
  private description: string;
  private versionText: string;
  private buttonText: string;

  constructor() { }

  showMainWindow(version: SystemVersion): void {
    this.version = version;
    this.setTextInWindow();
    this.buildMainWindow();
    document.body.appendChild(this.mainWrapper);
    this.createFakeAnimationProgress();
  }

  private setTextInWindow(): void {
    this.title = '<span>NEW<br>VERSION</span><br>AVAILABLE';
    this.description = 'There is a new update available, Please update the version to avoid unexpected behavior.';
    this.versionText = `Version: ${this.version.Version} / Build: ${this.version.Build}`;
    this.buttonText = 'Update';
  }

  private buildMainWindow(): void {
    this.mainWrapper = document.createElement('div');
    this.mainWrapper.id = 'updater-wrapper';
    this.createPanelContainer();
  }

  private createPanelContainer(): void {
    const container = document.createElement('div');
    container.classList.add('main-uwindow');
    container.appendChild(this.createLeftPanel());
    container.appendChild(this.createCenterPanel());
    container.appendChild(this.createRightPanel());
    this.mainWrapper.appendChild(container);
  }

  private createLeftPanel(): HTMLDivElement {
    const panel = document.createElement('div');
    panel.classList.add('upanel');
    panel.appendChild(this.createSVGFromString(this.worldSVG));
    const mainTitle = document.createElement('h1');
    mainTitle.innerHTML = this.title;
    panel.appendChild(mainTitle);
    const versionText = document.createElement('b');
    versionText.innerHTML = this.versionText;
    panel.appendChild(versionText);
    return panel;
  }

  private createCenterPanel(): HTMLDivElement {
    const panel = document.createElement('div');
    panel.classList.add('upanel');
    panel.innerText = this.description;
    const button = document.createElement('button');
    button.classList.add('ai-check');
    button.innerText = this.buttonText;
    button.disabled = true;
    button.addEventListener('click', () => {
      window.location.reload();
    });
    panel.appendChild(button);
    return panel;
  }

  private createRightPanel(): HTMLDivElement {
    const panel = document.createElement('div');
    panel.classList.add('upanel');
    const percentage = document.createElement('h6');
    percentage.id = 'progress-label';
    percentage.dataset.progress = '0%';
    panel.appendChild(percentage);
    panel.appendChild(this.createSVGFromString(this.progressSVG));
    return panel;
  }

  private createSVGFromString(svg: string): SVGElement {
    let bg: HTMLElement | any = document.createElement('div');
    bg.innerHTML = svg;
    bg = (bg.firstChild as HTMLElement | any);
    return bg as SVGElement;
  }

  private createFakeAnimationProgress(): void {
    const interval = setInterval(() => {
      const oldData = document.getElementById('progress-label').dataset.progress;
      // tslint:disable-next-line:radix
      const newData = parseInt(oldData.replace('%', '')) + (Math.floor(Math.random() * Math.floor(40)));
      if (newData > 100) {
        document.getElementById('progress-label').dataset.progress = '100%';
        document.getElementById('action-label').firstElementChild.innerHTML = 'Done';
        (this.mainWrapper.getElementsByClassName('progress-indicator')[0] as HTMLElement).style.strokeDasharray = `100, 100`;
        (this.mainWrapper.getElementsByClassName('ai-check')[0] as HTMLButtonElement).disabled = false;
        clearInterval(interval);
      } else {
        document.getElementById('progress-label').dataset.progress = newData + '%';
        (this.mainWrapper.getElementsByClassName('progress-indicator')[0] as HTMLElement).style.strokeDasharray = `${newData}, 100`;
      }
    }, 1000);
  }
}
